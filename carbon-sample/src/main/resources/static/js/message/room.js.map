{"version":3,"sources":["webpack:///webpack/bootstrap 6083c0a626091f154642","webpack:///./pages/message/room.js","webpack:///./pages/commons/DomUtil.js"],"names":["messageMain","document","getElementById","startForm","startButton","usernameText","roomIdText","content","form","textarea","createHeaderIcon","username","roomId","createMessageCard","sender","connection","onclick","value","startMessage","appendChild","style","display","socketProtocol","location","protocol","socketUrl","host","WebSocket","onmessage","message","JSON","parse","data","onsubmit","event","preventDefault","send","createElement","template","innerHTML","html","firstElementChild","removeElement","element","parentNode","removeChild","removeChildrens","firstChild"],"mappings":"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","file":"message/room.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/public/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6083c0a626091f154642","import { createElement, removeChildrens } from '../commons/DomUtil';\n\n// === dom element ==========\nconst messageMain = document.getElementById('message_main');\nconst startForm = document.getElementById('message_start_form');\nconst startButton = document.getElementById('message_start_button');\nconst usernameText = document.getElementById('message_username');\nconst roomIdText= document.getElementById('message_roomId');\nconst content = document.getElementById('message_content');\nconst form = document.getElementById('message_form');\nconst textarea = document.getElementById('message_text');\n\n// === create element ==========\nconst createHeaderIcon = (username, roomId) => createElement(`\n<div class=\"chip\">Name: ${username} @ room: ${roomId}</div>\n`);\n\nconst createMessageCard = (sender, content) => createElement(`\n<div class=\"col s4\">\n  <div class=\"card blue-grey darken-1\">\n    <div class=\"card-content white-text\">\n        <span class=\"card-title\">${sender}</span>\n        <p>${content}</p>\n    </div>\n  </div>\n</div>`);\n\n// === ui event ==========\nlet connection;\nstartButton.onclick = () => {\n  const username = usernameText.value;\n  const roomId = roomIdText.value;\n  startMessage(username, roomId);\n\n  removeChildrens(startForm);\n  startForm.appendChild(createHeaderIcon(username, roomId));\n  messageMain.style.display = 'block';\n};\n\nconst startMessage = (username, roomId) => {\n  const socketProtocol = (document.location.protocol==='https:') ? 'wss:' : 'ws:';\n  const socketUrl = `${socketProtocol}://${location.host}/message/socket/${username}/${roomId}`;\n  connection = new WebSocket(socketUrl, ['soap']);\n  connection.onmessage = data => {\n    const message = JSON.parse(data.data);\n    content.appendChild(createMessageCard(message.sender, message.content));\n  };\n};\n\nform.onsubmit = event => {\n  event.preventDefault();\n  const message = textarea.value;\n  connection.send(message);\n  textarea.value = '';\n};\n\n\n\n// WEBPACK FOOTER //\n// ./pages/message/room.js","const createElement = html => {\n  const template = document.createElement('div');\n  template.innerHTML = html;\n  return template.firstElementChild;\n};\n\nconst removeElement = element => {\n  element.parentNode.removeChild(element);\n};\n\nconst removeChildrens = element => {\n  while (element.firstChild) element.removeChild(element.firstChild);\n};\n\nexport {\n  createElement,\n  removeElement,\n  removeChildrens,\n};\n\n\n// WEBPACK FOOTER //\n// ./pages/commons/DomUtil.js"],"sourceRoot":""}